<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard | DebateSylhetBD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:0;
}
.container{
  max-width:400px;
  margin:80px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
h2{text-align:center;color:#0077ff}
input{
  width:100%;
  padding:12px;
  margin:10px 0;
  font-size:16px;
  border:2px solid #0077ff;
  border-radius:8px;
}
button{
  width:100%;
  padding:12px;
  background:#0077ff;
  color:#fff;
  font-size:16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
button:hover{background:#005fcc}
.error{color:red;text-align:center;margin-top:10px}
.dashboard{
  display:none;
  text-align:center;
}
.stat{
  font-size:20px;
  margin:20px 0;
  padding:15px;
  background:#eef5ff;
  border-radius:10px;
}
</style>
</head>

<body>

<div class="container" id="loginBox">
  <h2>Admin Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="error" id="error"></div>
</div>

<div class="container dashboard" id="dashboard">
  <h2>Analytics Dashboard</h2>
  <div class="stat">
    üëÅÔ∏è Total Website Views  
    <div style="font-size:32px;font-weight:bold" id="views">Loading...</div>
  </div>
</div>

<script>
// ===== ADMIN LOGIN =====
const ADMIN_USER = "Rizwan";
const ADMIN_PASS = "RahimRahim";

function login(){
  const u = document.getElementById("username").value;
  const p = document.getElementById("password").value;

  if(u === ADMIN_USER && p === ADMIN_PASS){
    document.getElementById("loginBox").style.display="none";
    document.getElementById("dashboard").style.display="block";
    loadViews();
    setInterval(loadViews, 10000); // auto refresh every 10 sec
  }else{
    document.getElementById("error").innerText = "Wrong username or password";
  }
}

// ===== SUPABASE CONFIG =====
const SUPABASE_URL = "https://defnfoffergmmdxqqxuo.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZm5mb2ZmZXJnbW1keHFxeHVvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0Mzk2NTgsImV4cCI6MjA4NTAxNTY1OH0.E9g23aPuvRQ4j_luwRMqqQFixqncLxrNxDBish4Qv_s";

// ===== LOAD VIEWS =====
function loadViews(){
  fetch(`${SUPABASE_URL}/rest/v1/views?id=eq.1`, {
    headers:{
      apikey: SUPABASE_KEY,
      Authorization: `Bearer ${SUPABASE_KEY}`
    }
  })
  .then(res => res.json())
  .then(data => {
    if(data && data.length > 0){
      document.getElementById("views").innerText = data[0].count;
    }
  });
}
</script>

</body>
</html>
